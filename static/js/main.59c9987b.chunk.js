(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{14:function(e,t,n){},21:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(4),i=n.n(a),s=(n(14),n(5)),o=n(3),u=n(2),l="PAUSE",j="RESUME",b="MOVE_LEFT",d="MOVE_RIGHT",f="ROTATE",O="ROTATE_PREV",v="MOVE_DOWN",h="GAME_OVER",g="RESTART",m=function(){return{type:d}},p=function(){return{type:b}},x=function(){return{type:f}},y=function(){return{type:v}},R=function(){return{type:l}},E=function(){return{type:j}},N=function(){return{type:g}},w=n(9),k=function(){for(var e=[],t=0;t<18;t++){e.push([]);for(var n=0;n<10;n++)e[t].push(0)}return e},A={left:["ArrowLeft","Left","a"],right:["ArrowRight","Right","d"],down:["ArrowDown","Down","s"],rotate:["ArrowUp","Up","w","x"],rotatePrev:["q","z"],pause:["Escape","Enter"],resume:["Escape","Enter"],restart:[" ","Enter"]},M=[[[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]],[[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]],[[[0,0,0,0],[1,1,1,0],[0,1,0,0],[0,0,0,0]],[[0,1,0,0],[1,1,0,0],[0,1,0,0],[0,0,0,0]],[[0,1,0,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,1,0],[0,1,0,0],[0,0,0,0]]],[[[0,0,0,0],[1,1,1,0],[1,0,0,0],[0,0,0,0]],[[1,1,0,0],[0,1,0,0],[0,1,0,0],[0,0,0,0]],[[0,0,1,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[0,1,1,0],[0,0,0,0]]],[[[1,0,0,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],[[0,1,1,0],[0,1,0,0],[0,1,0,0],[0,0,0,0]],[[0,0,0,0],[1,1,1,0],[0,0,1,0],[0,0,0,0]],[[0,1,0,0],[0,1,0,0],[1,1,0,0],[0,0,0,0]]],[[[0,0,0,0],[1,1,0,0],[0,1,1,0],[0,0,0,0]],[[0,0,1,0],[0,1,1,0],[0,1,0,0],[0,0,0,0]]],[[[0,0,0,0],[0,1,1,0],[1,1,0,0],[0,0,0,0]],[[0,1,0,0],[0,1,1,0],[0,0,1,0],[0,0,0,0]]],[[[0,1,1,0],[0,1,1,0],[0,0,0,0],[0,0,0,0]]]],T=function(){return e=1,t=M.length-1,Math.floor(Math.random()*(t-e+1))+e;var e,t},L=function(){return{grid:k(),shape:T(),rotation:0,x:4,y:-4,nextShape:T(),isRunning:!0,score:0,speed:1e3,gameOver:!1,lines:0,level:0}},P=function(e,t){return(t+1)%M[e].length},S=function(e,t){return 0===t?M[e].length-1:(t-1)%M[e].length},C=function(e,t,n,r,c){var a=M[e][c];console.log(a);for(var i=t[0].length-1,s=t.length-1,o=0;o<a.length;o++)for(var u=0;u<a[o].length;u++)if(0!==a[o][u]){var l=u+n,j=o+r;if(j<0)continue;var b=t[j];if(l<0||l>i||j>s)return!1;if(void 0!==b&&0!==b[l])return!1}return!0},D=function(e,t,n,r,c){for(var a=!1,i=M[e][c],s=Object(w.a)(t),o=0;o<i.length;o++)for(var u=0;u<i[o].length;u++){if(i[o][u])o+r<0?a=!0:s[o+r][u+n]=e}return{grid:s,gameOver:a}},V=function(e){for(var t=0,n=0;n<e.length;n++)-1===e[n].indexOf(0)&&(t+=1,e.splice(n,1),e.unshift(Array(10).fill(0)));return{points:[0,40,100,300,1200][t],lines:t}},_=function(e){return Math.floor(e/4)},q=function(e){return e<=18?1e3-50*e:100},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L(),t=arguments.length>1?arguments[1]:void 0,n=e.shape,r=e.grid,c=e.x,a=e.y,i=e.rotation,s=e.nextShape,o=e.score,m=e.isRunning,p=e.lines,x=e.level,y=e.speed;switch(t.type){case f:var R=P(n,i);return C(n,r,c,a,R)?Object(u.a)(Object(u.a)({},e),{},{rotation:R}):e;case O:var E=S(n,i);return C(n,r,c,a,E)?Object(u.a)(Object(u.a)({},e),{},{rotation:E}):e;case d:return C(n,r,c+1,a,i)?Object(u.a)(Object(u.a)({},e),{},{x:c+1}):e;case b:return C(n,r,c-1,a,i)?Object(u.a)(Object(u.a)({},e),{},{x:c-1}):e;case v:var N=a+1;if(C(n,r,c,N,i))return Object(u.a)(Object(u.a)({},e),{},{y:N});var w=D(n,r,c,a,i),k=w.grid,A=w.gameOver;if(A){var M=Object(u.a)({},e);return M.shape=0,M.grid=k,Object(u.a)(Object(u.a)({},e),{},{gameOver:!0})}var T=L();T.grid=k,T.shape=s,T.score=o,T.isRunning=m,T.lines=p,T.level=x,T.speed=y;var F=V(k);return T.score=o+F.points*(x+1),T.lines=p+F.lines,T.level=_(T.lines),T.speed=q(T.level),T;case j:return Object(u.a)(Object(u.a)({},e),{},{isRunning:!0});case l:return Object(u.a)(Object(u.a)({},e),{},{isRunning:!1});case h:return e;case g:return L();default:return e}},U=Object(s.a)({game:F}),G=(n(21),n(1));function I(e){var t="grid-square color-".concat(e.color);return Object(G.jsx)("div",{className:t})}function J(e){var t=Object(r.useRef)(),n=Object(r.useRef)(0),c=Object(r.useRef)(0),a=Object(o.b)(),i=Object(o.c)((function(e){return e.game})),s=i.grid,u=i.shape,l=i.rotation,j=i.x,b=i.y,d=i.isRunning,f=i.speed,O=M[u][l],v=u,h=s.map((function(e,t){return e.map((function(e,n){var r=n-j,c=t-b,a=e;r>=0&&r<O.length&&c>=0&&c<O.length&&(a=0===O[c][r]?a:v);var i=t*s[0].length+n;return Object(G.jsx)(I,{color:a},i)}))})),g=function e(r){if(t.current=requestAnimationFrame(e),d){n.current||(n.current=r);var i=r-n.current;c.current+=i,c.current>f&&(a(y()),c.current=0),n.current=r}};return Object(r.useEffect)((function(){return t.current=requestAnimationFrame(g),function(){return cancelAnimationFrame(t.current)}}),[d]),Object(G.jsx)("div",{className:"grid-board",children:h})}function z(e){var t=Object(o.c)((function(e){return e.game.nextShape})),n=M[t][0].map((function(e,n){return e.map((function(e,r){return Object(G.jsx)(I,{color:0===e?0:t},"".concat(n).concat(r))}))}));return Object(G.jsxs)("div",{children:[Object(G.jsx)("div",{className:"next-title",children:"Next:"}),Object(G.jsx)("div",{className:"next-block",children:n})]})}function B(e){var t=Object(o.b)(),n=Object(o.c)((function(e){return e.game})),r=n.score,c=n.isRunning,a=n.gameOver,i=n.lines,s=n.level;return Object(G.jsxs)("div",{className:"score-board",children:[Object(G.jsxs)("div",{children:["Level: ",s]}),Object(G.jsxs)("div",{children:["Lines: ",i]}),Object(G.jsxs)("div",{children:["Score: ",r]}),Object(G.jsx)("button",{className:"score-board-button",onClick:function(e){a||t(c?R():E())},children:c?"Pause":"Play"}),Object(G.jsx)("button",{className:"score-board-button",onClick:function(e){t(N())},children:"Restart"})]})}function H(e){var t=Object(o.b)(),n=Object(o.c)((function(e){return e.game.isRunning})),c=Object(o.c)((function(e){return e.game.gameOver}));Object(r.useEffect)((function(){return document.addEventListener("keydown",a),function(){document.removeEventListener("keydown",a)}}));var a=function(e){e.defaultPrevented||(n?c?A.restart.includes(e.key)&&t(N()):A.pause.includes(e.key)?t(R()):(A.down.includes(e.key)&&t(y()),A.left.includes(e.key)?t(p()):A.right.includes(e.key)&&t(m()),A.rotate.includes(e.key)?t(x()):A.rotatePrev.includes(e.key)&&t({type:O}),e.preventDefault()):A.resume.includes(e.key)&&t(E()))};return Object(G.jsxs)("div",{className:"controls",children:[Object(G.jsx)("button",{className:"control-button",disabled:!n||c,onClick:function(e){n&&!c&&t(p())},children:Object(G.jsx)("img",{className:"control-icon",src:"".concat("","/icons/arrow-left.svg"),alt:"Left"})}),Object(G.jsx)("button",{className:"control-button",disabled:!n||c,onClick:function(e){n&&!c&&t(m())},children:Object(G.jsx)("img",{className:"control-icon",src:"".concat("","/icons/arrow-right.svg"),alt:"Right"})}),Object(G.jsx)("button",{className:"control-button",disabled:!n||c,onClick:function(e){n&&!c&&t(x())},children:Object(G.jsx)("img",{className:"control-icon",src:"".concat("","/icons/arrow-rotate.svg"),alt:"Rotate"})}),Object(G.jsx)("button",{className:"control-button",disabled:!n||c,onClick:function(e){n&&!c&&t(y())},children:Object(G.jsx)("img",{className:"control-icon",src:"".concat("","/icons/arrow-down.svg"),alt:"Down"})})]})}function W(e){var t=Object(o.c)((function(e){return e.game.isRunning})),n="",r="hidden";return Object(o.c)((function(e){return e.game.gameOver}))?(n="Game Over",r=""):t||(n="Paused",r=""),Object(G.jsx)("div",{className:"message-popup ".concat(r),children:Object(G.jsx)("h1",{children:n})})}var K=Object(s.b)(U);var Q=function(){return Object(G.jsx)(o.a,{store:K,children:Object(G.jsxs)("div",{className:"App",children:[Object(G.jsx)("header",{className:"App-header",children:Object(G.jsx)("h1",{className:"App-title",children:"Tetris Redux"})}),Object(G.jsx)(J,{}),Object(G.jsx)(z,{}),Object(G.jsx)(B,{}),Object(G.jsx)(H,{}),Object(G.jsx)(W,{})]})})};i.a.render(Object(G.jsx)(c.a.StrictMode,{children:Object(G.jsx)(Q,{})}),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.59c9987b.chunk.js.map